title: 我心目中的支付宝架构
date: 2017-01-26 13:56:03
categories:
- 架构
tags:
- Alipay
- Architecture
- Decoupling

---

## 前言

虽然不是我的工作中心，但是看到支付宝的架构体系存在一些我认为可以优化的点，因此在周末时，我还是希望自己能够回归技术探究，因此写了一些的根据自己短暂的工作经验的想法的从工作流到整个架构体系的优化建议。今天就谈谈我想要的架构体系优化，虽然最后因为一些原因**没有在支付宝中推动起来**，但是大家可以交流交流，这个简单的体系并不耦合于支付宝体系本身。

<!--more-->

## 原委

现有的支付宝现有的架构体系，大家应可以通过三平的这个[沙龙](http://club.alibabatech.org/technical_preacher_detail.htm?guestId=155)中窥探，这套架构体系，在提出来的时候是十分先进的，通过每个模块从原本的"静态库"调整为"共享库"（APK），使得每个模块充分解耦并支持独立动态部署、独立的版本管理，但是也因此需要侵入期间的编译环节、随之带来了很强的侵入性（架构复杂度很高使得维护成本变得很高）、相对社区闭塞的技术发展、新技术应用门槛变高，使我想要重新审视这套架构，我总觉得在现在社区的技术而言，侵入性完全可以得到优化。

## 新架构预想

- 兼并已有的各模块独立开发的优势
- 符合社区标准，利于哺乳社区与反哺社区
- 尽量轻量，严格的性能监控
- 严谨的架构扩张
- 严格、行而有效的开发流程
- 对上层尽量无感知，将学习成本降到最低，减少整合门槛

![](/img/alipay-architecture-thought.png)

右侧是思考了，并实践了的过渡版本，左侧的V2是预想中的支付宝架构(自己简单实践，其中的api与impl的打包可以参照[gradle-sample](https://github.com/Jacksgong/gralde-sample))。
